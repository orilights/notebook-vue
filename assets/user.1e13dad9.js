import{u as j,C as R,P as S,r as y}from"./common.c8e8ada1.js";import{k as O,q as I,l as r,G as M,y as o,o as g,x as l,j as u,m as w,b as T,B as q,s as $,u as U,f as k,H as b,w as Z,A as G}from"./vendor.2eff74f4.js";import{_ as m,h as H,a as J,i as W,j as Y,U as uu,k as eu,l as lu,f as tu,m as su}from"./shared/note/user.58ea9087.js";import{_ as h}from"./shared/page/user.9a7074b9.js";const ou=u("div",{class:"text-center font-semibold text-xl mb-6"},"\u7528\u6237\u767B\u5F55",-1),au={class:"my-4"},nu=u("span",null,"\u8D26\u53F7\uFF1A",-1),ru={class:"my-4"},iu=u("span",null,"\u5BC6\u7801\uFF1A",-1),du={class:"mt-6 flex justify-center"},cu={class:"mt-4 flex justify-between"},Fu=u("a",null,"\u524D\u5F80\u6CE8\u518C",-1),mu=u("a",null,"\u5FD8\u8BB0\u5BC6\u7801",-1),fu=O({__name:"Login",setup(N){const s=j(),e=I(),c=r(""),v=r("");async function a(){if(c.value.trim()=="")return e.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;if(v.value.trim()=="")return e.warning("\u5BC6\u7801\u4E0D\u53EF\u4E3A\u7A7A"),0;s.networkLoading=!0;const t=await H(c.value,v.value);t.code==0?(e.clear(),e.success("\u767B\u5F55\u6210\u529F"),s.login=!0,s.userId=c.value,T.set("login","1",{expires:7}),T.set("userid",c.value,{expires:7}),y.push("/")):(t.code=2)?e.warning(t.msg):(t.code=3)&&e.error(t.msg),s.networkLoading=!1}return(t,F)=>{const A=q("RouterLink");return g(),M(R,null,{default:o(()=>[l(S,null,{default:o(()=>[ou,u("div",au,[nu,l(m,{type:"text",modelValue:c.value,"onUpdate:modelValue":F[0]||(F[0]=f=>c.value=f),"place-holder":"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue"])]),u("div",ru,[iu,l(m,{type:"password",modelValue:v.value,"onUpdate:modelValue":F[1]||(F[1]=f=>v.value=f),"place-holder":"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),u("div",du,[l(h,{onClick:a},{default:o(()=>[w("\u767B\u5F55")]),_:1})]),u("div",cu,[l(A,{to:"/register"},{default:o(()=>[Fu]),_:1}),l(A,{to:"/login/forgetpassword"},{default:o(()=>[mu]),_:1})])]),_:1})]),_:1})}}}),pe=Object.freeze(Object.defineProperty({__proto__:null,default:fu},Symbol.toStringTag,{value:"Module"})),_u=u("a",{class:"absolute text-sm top-4 left-4"},"\u8FD4\u56DE",-1),Bu=u("div",{class:"text-center font-semibold text-xl mb-6"},"\u7528\u6237\u6CE8\u518C",-1),Cu={class:"my-4 flex"},vu=u("span",null,"\u8D26\u53F7\uFF1A",-1),pu={key:0,class:"text-red-600 text-sm"},Eu={class:"my-4 flex"},Au=u("span",null,"\u6635\u79F0\uFF1A",-1),wu={class:"my-4 flex"},gu=u("span",null,"\u5BC6\u7801\uFF1A",-1),Du={key:0,class:"text-red-600 text-sm"},xu={class:"my-4 flex"},yu=u("span",null,"\u91CD\u590D\u5BC6\u7801\uFF1A",-1),hu={class:"my-4"},Vu=u("span",null,"\u6027\u522B\uFF1A",-1),$u={for:"sex_male",class:"mr-2"},ku={for:"sex_female",class:"mr-2"},bu={for:"sex_secret"},Uu={class:"my-4 flex"},Pu=u("span",null,"\u624B\u673A\u53F7\u7801\uFF1A",-1),Lu={class:"my-4 flex"},ju=u("span",null,"\u90AE\u7BB1\uFF1A",-1),Ru={class:"my-4 flex justify-center"},Su={key:0,class:"my-4"},Ou=u("span",null,"\u9A8C\u8BC1\u7801\uFF1A",-1),Iu={class:"mt-6 flex justify-center"},Mu=O({__name:"Register",setup(N){const s=j(),e=I(),c=/^[a-z0-9-_]{5,15}$/,v=/^(?=.*?[a-zA-Z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$/,a=/^[0-9]{11}$/,t=/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/,F=$(()=>c.test(C.value)||C.value==""),A=$(()=>v.test(d.value)||d.value==""),f=$(()=>a.test(E.value)),_=$(()=>t.test(V.value)),C=r(""),x=r(""),d=r(""),B=r(""),p=r("male"),E=r(""),V=r(""),z=r(""),P=r(!1);let L="";async function K(){if(_.value)if(P.value)e.warning("\u4E0D\u53EF\u91CD\u590D\u53D1\u9001\u9A8C\u8BC1\u90AE\u4EF6");else{for(;L.length<6;)L+=Math.floor(Math.random()*10);console.log(L),s.networkLoading=!0;let D=await W(V.value,L,x.value);D.code==0?(e.info("\u9A8C\u8BC1\u90AE\u4EF6\u5DF2\u53D1\u9001"),P.value=!0):e.error(D.msg),s.networkLoading=!1}else e.warning("\u90AE\u7BB1\u5730\u5740\u975E\u6CD5")}async function Q(){if(console.log(p.value),C.value.trim()=="")return e.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;if(x.value.trim()=="")return e.warning("\u6635\u79F0\u4E0D\u53EF\u4E3A\u7A7A"),0;if(d.value.trim()=="")return e.warning("\u5BC6\u7801\u4E0D\u53EF\u4E3A\u7A7A"),0;if(d.value.trim()!=B.value.trim())return e.warning("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u540C"),0;if(E.value.trim()=="")return e.warning("\u624B\u673A\u53F7\u7801\u4E0D\u53EF\u4E3A\u7A7A"),0;if(V.value.trim()=="")return e.warning("\u90AE\u7BB1\u4E0D\u53EF\u4E3A\u7A7A"),0;if(!F.value)return e.warning("\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"),e.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4}),0;if(!A.value)return e.warning("\u5F53\u524D\u5BC6\u7801\u683C\u5F0F\u975E\u6CD5"),e.info("\u5BC6\u7801\u9700\u8981\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u548C\u7279\u6B8A\u7B26\u53F7\uFF0C\u957F\u5EA6\u6700\u5C11\u4E3A8\u4F4D",{timeout:1e4}),0;if(!f.value)return e.warning("\u5F53\u524D\u624B\u673A\u53F7\u7801\u683C\u5F0F\u975E\u6CD5"),0;if(!_.value)return e.warning("\u5F53\u524D\u90AE\u7BB1\u683C\u5F0F\u975E\u6CD5"),0;if(!P.value)return e.warning("\u8BF7\u5148\u53D1\u9001\u9A8C\u8BC1\u90AE\u4EF6"),0;if(z.value.trim()=="")return e.warning("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"),0;if(z.value.trim()!=L)return e.warning("\u9A8C\u8BC1\u7801\u9519\u8BEF"),0;s.networkLoading=!0;const D=await Y(C.value,x.value,d.value,p.value,E.value,V.value);D.code==0?(e.success(D.msg),y.push("/login")):(D.code=3)&&e.error(D.msg),s.networkLoading=!1}return(D,n)=>{const X=q("RouterLink");return g(),M(R,null,{default:o(()=>[l(S,{class:"w-[350px]"},{default:o(()=>[l(X,{to:"/login"},{default:o(()=>[_u]),_:1}),Bu,u("div",Cu,[vu,l(m,{class:"flex-1",type:"text",modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=i=>C.value=i),"place-holder":"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue"])]),u("div",null,[U(F)?b("",!0):(g(),k("p",pu,"\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26"))]),u("div",Eu,[Au,l(m,{class:"flex-1",type:"text",modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=i=>x.value=i),"place-holder":"\u8BF7\u8F93\u5165\u6635\u79F0"},null,8,["modelValue"])]),u("div",wu,[gu,l(m,{class:"flex-1",type:"password",modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=i=>d.value=i),"place-holder":"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),u("div",null,[U(A)?b("",!0):(g(),k("span",Du,"\u5BC6\u7801\u9700\u8981\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u548C\u7279\u6B8A\u7B26\u53F7\uFF0C\u957F\u5EA6\u6700\u5C11\u4E3A8\u4F4D"))]),u("div",xu,[yu,l(m,{class:"flex-1",type:"password",modelValue:B.value,"onUpdate:modelValue":n[3]||(n[3]=i=>B.value=i),"place-holder":"\u8BF7\u91CD\u590D\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),u("div",hu,[Vu,u("label",$u,[Z(u("input",{type:"radio",name:"sex",id:"sex_male",value:"male","onUpdate:modelValue":n[4]||(n[4]=i=>p.value=i)},null,512),[[G,p.value]]),w(" \u7537")]),u("label",ku,[Z(u("input",{type:"radio",name:"sex",id:"sex_female",value:"female","onUpdate:modelValue":n[5]||(n[5]=i=>p.value=i)},null,512),[[G,p.value]]),w(" \u5973")]),u("label",bu,[Z(u("input",{type:"radio",name:"sex",id:"sex_secret",value:"secret","onUpdate:modelValue":n[6]||(n[6]=i=>p.value=i)},null,512),[[G,p.value]]),w(" \u4FDD\u5BC6")])]),u("div",Uu,[Pu,l(m,{class:"flex-1",type:"text",modelValue:E.value,"onUpdate:modelValue":n[7]||(n[7]=i=>E.value=i),"place-holder":"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),u("div",Lu,[ju,l(m,{class:"flex-1",type:"email",modelValue:V.value,"onUpdate:modelValue":n[8]||(n[8]=i=>V.value=i),"place-holder":"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),u("div",Ru,[l(J,{onClick:K,disabled:P.value},{default:o(()=>[w("\u53D1\u9001\u9A8C\u8BC1\u90AE\u4EF6")]),_:1},8,["disabled"])]),P.value?(g(),k("div",Su,[Ou,l(m,{type:"text",modelValue:z.value,"onUpdate:modelValue":n[9]||(n[9]=i=>z.value=i),"place-holder":"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"])])):b("",!0),u("div",Iu,[l(h,{onClick:Q},{default:o(()=>[w("\u6CE8\u518C")]),_:1})])]),_:1})]),_:1})}}}),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Mu},Symbol.toStringTag,{value:"Module"})),Nu=u("a",{class:"absolute text-sm top-4 left-4"},"\u8FD4\u56DE",-1),zu=u("div",{class:"text-center font-semibold text-xl mb-6"},"\u5FD8\u8BB0\u5BC6\u7801",-1),Tu={class:"my-4 flex"},Zu=u("span",null,"\u8D26\u53F7\uFF1A",-1),Gu={class:"my-4 flex"},qu=u("span",null,"\u65B0\u5BC6\u7801\uFF1A",-1),Hu={key:0,class:"text-red-600 text-sm"},Ju={class:"my-4 flex"},Wu=u("span",null,"\u91CD\u590D\u5BC6\u7801\uFF1A",-1),Ku={class:"my-4 flex justify-center"},Qu={key:0,class:"my-4 flex"},Xu=u("span",null,"\u9A8C\u8BC1\u7801\uFF1A",-1),Yu={class:"mt-6 flex justify-center"},ue=O({__name:"ForgetPassword",setup(N){const s=j(),e=I(),c=/^(?=.*?[a-zA-Z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$/,v=$(()=>c.test(t.value)||t.value==""),a=r(""),t=r(""),F=r(""),A=r(!1),f=r("");let _="";async function C(){if(a.value=="")return e.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;s.networkLoading=!0;const d=await uu(a.value);if(d.code==0){const B=JSON.parse(d.msg);for(;_.length<6;)_+=Math.floor(Math.random()*10);console.log(_);let p=await W(B.email,_,B.name);p.code==0?(e.info("\u9A8C\u8BC1\u90AE\u4EF6\u5DF2\u53D1\u9001"),A.value=!0):e.error(p.msg)}else(d.code=3)&&e.error(d.msg);s.networkLoading=!1}async function x(){if(a.value=="")return e.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;if(t.value.trim()=="")return e.warning("\u5BC6\u7801\u4E0D\u53EF\u4E3A\u7A7A"),0;if(!v.value)return e.warning("\u5F53\u524D\u5BC6\u7801\u683C\u5F0F\u975E\u6CD5"),e.info("\u5BC6\u7801\u9700\u8981\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u548C\u7279\u6B8A\u7B26\u53F7\uFF0C\u957F\u5EA6\u6700\u5C11\u4E3A8\u4F4D",{timeout:1e4}),0;if(t.value.trim()!=F.value.trim())return e.warning("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u540C"),0;if(!A.value)return e.warning("\u8BF7\u5148\u53D1\u9001\u9A8C\u8BC1\u90AE\u4EF6"),0;if(f.value.trim()=="")return e.warning("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"),0;if(f.value.trim()!=_)return e.warning("\u9A8C\u8BC1\u7801\u9519\u8BEF"),0;s.networkLoading=!0;const d=await eu(a.value,t.value);d.code==0?(e.success(d.msg),y.push("/login")):(d.code=3)&&e.error(d.msg),s.networkLoading=!1}return(d,B)=>{const p=q("RouterLink");return g(),M(R,null,{default:o(()=>[l(S,{class:"w-[350px]"},{default:o(()=>[l(p,{to:"/login"},{default:o(()=>[Nu]),_:1}),zu,u("div",Tu,[Zu,l(m,{class:"flex-1",type:"email",modelValue:a.value,"onUpdate:modelValue":B[0]||(B[0]=E=>a.value=E),"place-holder":"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue"])]),u("div",Gu,[qu,l(m,{class:"flex-1",type:"password",modelValue:t.value,"onUpdate:modelValue":B[1]||(B[1]=E=>t.value=E),"place-holder":"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),u("div",null,[U(v)?b("",!0):(g(),k("span",Hu,"\u5BC6\u7801\u9700\u8981\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u548C\u7279\u6B8A\u7B26\u53F7\uFF0C\u957F\u5EA6\u6700\u5C11\u4E3A8\u4F4D"))]),u("div",Ju,[Wu,l(m,{class:"flex-1",type:"password",modelValue:F.value,"onUpdate:modelValue":B[2]||(B[2]=E=>F.value=E),"place-holder":"\u8BF7\u91CD\u590D\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),u("div",Ku,[l(J,{onClick:C,disabled:A.value},{default:o(()=>[w("\u53D1\u9001\u9A8C\u8BC1\u90AE\u4EF6")]),_:1},8,["disabled"])]),A.value?(g(),k("div",Qu,[Xu,l(m,{class:"flex-1",type:"text",modelValue:f.value,"onUpdate:modelValue":B[3]||(B[3]=E=>f.value=E),"place-holder":"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"])])):b("",!0),u("div",Yu,[l(h,{onClick:x},{default:o(()=>[w("\u4FEE\u6539\u5BC6\u7801")]),_:1})])]),_:1})]),_:1})}}}),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),ee={class:"my-4 flex"},le=u("span",null,"\u65E7\u5BC6\u7801\uFF1A",-1),te={class:"my-4 flex"},se=u("span",null,"\u65B0\u5BC6\u7801\uFF1A",-1),oe={key:0,class:"text-red-600 text-sm"},ae={class:"my-4 flex"},ne=u("span",null,"\u91CD\u590D\u65B0\u5BC6\u7801\uFF1A",-1),re=O({__name:"EditPassword",setup(N){const s=j(),e=I(),c=/^(?=.*?[a-zA-Z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$/,v=$(()=>c.test(t.value)||t.value==""),a=r(""),t=r(""),F=r("");async function A(){if(t.value.trim()=="")return e.warning("\u5BC6\u7801\u4E0D\u53EF\u4E3A\u7A7A"),0;if(t.value.trim()!=F.value.trim())return e.warning("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u540C"),0;s.networkLoading=!0;const f=await lu(s.userId,a.value,t.value);f.code==0?(e.success(f.msg),y.back()):(f.code=3)&&e.error(f.msg),s.networkLoading=!1}return(f,_)=>(g(),M(R,null,{default:o(()=>[l(S,{class:"w-[350px]"},{default:o(()=>[u("div",ee,[le,l(m,{class:"flex-1",type:"password",modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=C=>a.value=C),"place-holder":"\u8BF7\u8F93\u5165\u65E7\u5BC6\u7801"},null,8,["modelValue"])]),u("div",te,[se,l(m,{class:"flex-1",type:"password",modelValue:t.value,"onUpdate:modelValue":_[1]||(_[1]=C=>t.value=C),"place-holder":"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),u("div",null,[U(v)?b("",!0):(g(),k("span",oe,"\u5BC6\u7801\u9700\u8981\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u548C\u7279\u6B8A\u7B26\u53F7\uFF0C\u957F\u5EA6\u6700\u5C11\u4E3A8\u4F4D"))]),u("div",ae,[ne,l(m,{class:"flex-1",type:"password",modelValue:F.value,"onUpdate:modelValue":_[2]||(_[2]=C=>F.value=C),"place-holder":"\u8BF7\u91CD\u590D\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),l(h,{onClick:A},{default:o(()=>[w("\u4FEE\u6539")]),_:1}),l(h,{onClick:U(y).back},{default:o(()=>[w("\u53D6\u6D88")]),_:1},8,["onClick"])]),_:1})]),_:1}))}}),we=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),ie=u("div",{class:"text-center font-semibold text-xl mb-6"},"\u7528\u6237\u6CE8\u9500",-1),de={class:"my-4 flex"},ce=u("span",null,"\u9A8C\u8BC1\u5BC6\u7801\uFF1A",-1),Fe=u("div",{class:"text-red-500"},"\u8FD9\u5C06\u5220\u9664\u7528\u6237\u6240\u6709\u6570\u636E\u4EE5\u53CA\u521B\u5EFA\u7684\u6240\u6709\u7B14\u8BB0\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",-1),me={class:"flex justify-center mt-6"},fe=O({__name:"DeleteAccount",setup(N){const s=j(),e=I(),c=r("");async function v(){if(c.value.trim()=="")return e.warning("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"),0;s.networkLoading=!0;const a=await H(s.userId,c.value);a.code==0?(e.success("\u9A8C\u8BC1\u6210\u529F\uFF0C\u6B63\u5728\u5220\u9664\u7528\u6237\u6570\u636E"),Object.keys(s.noteList).forEach(async t=>{await tu(t),e.info("\u5220\u9664\u7B14\u8BB0\uFF1A"+t)}),await su(s.userId),e.info("\u5220\u9664\u7528\u6237\uFF1A"+s.userId),s.login=!1,s.userId="",T.remove("login"),T.remove("userid"),e.success("\u6CE8\u9500\u5B8C\u6210"),y.push("/login")):(a.code=2)?e.warning(a.msg):(a.code=3)&&e.error(a.msg),s.networkLoading=!1}return(a,t)=>(g(),M(R,null,{default:o(()=>[l(S,{class:"w-[350px]"},{default:o(()=>[ie,u("div",de,[ce,l(m,{class:"flex-1",type:"password",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=F=>c.value=F),"place-holder":"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),Fe,u("div",me,[l(h,{onClick:v},{default:o(()=>[w("\u6CE8\u9500")]),_:1}),l(h,{onClick:U(y).back},{default:o(()=>[w("\u53D6\u6D88")]),_:1},8,["onClick"])])]),_:1})]),_:1}))}}),ge=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"}));export{ge as D,we as E,Ae as F,pe as L,Ee as R};
